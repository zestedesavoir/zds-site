{% extends "member/base.html" %}
{% load date %}
{% load i18n %}


{% block title %}
    {% trans "Demandes de casquettes" %}
{% endblock %}



{% block breadcrumb %}
    <li>
        {% trans "Demandes de casquettes" %}
    </li>
{% endblock %}



{% block headline %}
    {% trans "Demandes de casquettes" %}
{% endblock %}



{% block content %}
    {% include "misc/paginator.html" with position="top" %}

    {% if requests %}
        <table class="fullwidth">
            <thead>
                <th>{% trans "Utilisateur" %}</th>
                <th>{% trans "Casquette demandée" %}</th>
                <th>{% trans "Actions" %}</th>
            </thead>
            <tbody>
                {% for request in requests %}
                    <tr>
                        <td>{% include 'misc/member_item.part.html' with member=request.user avatar=True %}</td>
                        <td>{{ request.hat }} – <a href="#reason-{{ request.pk }}" class="open-modal">{% trans "Afficher la raison" %}</a></td>
                        <td>
                            <form method="post" action="{% url 'solve-hat-request' request.pk %}">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-grey ico-after red cross">{% trans "Refuser" %}</button>
                                <button type="submit" name="grant" class="btn btn-grey ico-after green tick">{% trans "Accorder" %}</button>
                            </form>
                        </td>
                    </tr>

                    <div class="modal" id="reason-{{ request.pk }}" data-modal-close="{% trans "Fermer" %}">
                        {{ request.reason|linebreaks }}
                    </div>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <em>{% trans "Aucune demande n'est en cours." %}</em>
    {% endif %}

    {% include "misc/paginator.html" with position="bottom" %}
{% endblock %}
