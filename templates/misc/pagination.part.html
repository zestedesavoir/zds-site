{% load captureas %}
{% load append_to_get %}



{% if pages|length > 1 %}
    <ul class="pagination pagination-{{ position }}">
        {% ifnotequal nb 1 %}
            <li class="prev">
                {% with prev=nb|add:-1 %}
                    <a href="{% append_to_get page=prev %}" class="ico-after arrow-left blue">
                        Précédente
                    </a>
                {% endwith %}
            </li>
        {% endifnotequal %}


        {% for page in pages %}
            {% if page %}
                <li>
                    <a {% ifnotequal page nb %}href="{% append_to_get page=page %}"{% else %}class="current"{% endifnotequal %}>
                        {{ page }}
                    </a>
                </li>
            {% else %}
                <li>
                    <a href="#pagination-{{ position }}" class="open-modal">…</a>
                    <form action="." method="get" class="modal modal-small" id="pagination-{{ position }}" data-modal-title="Aller à la page…">
                        <p>
                            Indiquez la page à laquelle vous souhaitez vous rendre.
                        </p>
                        <input type="number" name="page" min="1" max="{{ pages|last }}">
                        <button type="submit">
                            Aller à la page
                        </button>
                    </form>
                </li>
            {% endif %}
        {% endfor %}
        
        {% if pages|last > 0 and pages|last != nb %}
            <li class="next">
                {% with next=nb|add:1 %}
                    <a href="{% append_to_get page=next %}" class="ico-after arrow-right blue">
                        Suivante
                    </a>
                {% endwith %}
            </li>
        {% endif %}
    </ul>
{% endif %}