

<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Arborescence du back-end &mdash; Documentation Zeste de Savoir dev</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Les outils de mises en avant (featured/)" href="featured.html" />
    <link rel="prev" title="Documentation technique du back-end" href="../back-end-code.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Zeste de Savoir
          

          
          </a>

          
            
            
              <div class="version">
                dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../guides.html">Guides pas-à-pas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contribuer à Zeste de Savoir</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html"><em>Workflow</em> et détails pratiques</a></li>
<li class="toctree-l1"><a class="reference internal" href="../back-end.html">Le <em>back-end</em></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../back-end-code.html">Documentation technique du <em>back-end</em></a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Arborescence du <em>back-end</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#arborescence-generale-de-zds">Arborescence générale de <code class="docutils literal notranslate"><span class="pre">zds/</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#contenu-d-un-module">Contenu d’un module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fichiers-principaux">Fichiers principaux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tests-unitaires">Tests unitaires</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gestion-de-la-base-de-donnees">Gestion de la base de données</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api">API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#autres">Autres</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="featured.html">Les outils de mises en avant (<code class="docutils literal notranslate"><span class="pre">featured/</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="forum.html">Les forums (<code class="docutils literal notranslate"><span class="pre">forum/</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="gallery.html">Les galleries (<code class="docutils literal notranslate"><span class="pre">gallery/</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="member.html">Les membres (<code class="docutils literal notranslate"><span class="pre">member/</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="pages.html">Les pages (<code class="docutils literal notranslate"><span class="pre">pages/</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="private-message.html">Les messages privés (<code class="docutils literal notranslate"><span class="pre">mp/</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="searchv2.html">La recherche (<code class="docutils literal notranslate"><span class="pre">searchv2/</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorialv2.html">Les tutoriels v2 (ZEP12) (<code class="docutils literal notranslate"><span class="pre">tutorialv2/</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Les utilitaires (<code class="docutils literal notranslate"><span class="pre">utils/</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../front-end.html">Le <em>front-end</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils.html">Makefile et autres outils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../delay-issue.html">Problème de lenteur lors du dev ?</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Zeste de Savoir</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../back-end-code.html">Documentation technique du <em>back-end</em></a> &raquo;</li>
        
      <li>Arborescence du <em>back-end</em></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/back-end-code/arborescence-back.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="arborescence-du-back-end">
<h1>Arborescence du <em>back-end</em><a class="headerlink" href="#arborescence-du-back-end" title="Lien permanent vers ce titre">¶</a></h1>
<p>Le <em>back-end</em> est divisé en différents modules qui assurent chacun une tâche du site. Ceux-ci sont intégralement localisés dans le dossier <code class="docutils literal notranslate"><span class="pre">zds/</span></code>.</p>
<div class="section" id="arborescence-generale-de-zds">
<h2>Arborescence générale de <code class="docutils literal notranslate"><span class="pre">zds/</span></code><a class="headerlink" href="#arborescence-generale-de-zds" title="Lien permanent vers ce titre">¶</a></h2>
<p>On retrouve un dossier pour chaque module du site :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zds/
├── article/ <span class="c1"># module des articles</span>
│   └── ...
├── featured/ <span class="c1"># module des mises en avant</span>
│   └── ...
├── forum/ <span class="c1"># module des forums</span>
│   └── ...
├── gallery/ <span class="c1"># module des galleries</span>
│   └── ...
├── member/ <span class="c1"># module des membres</span>
│   └── ...
├── mp/ <span class="c1"># module des messages privés</span>
│   └── ...
├── munin/ <span class="c1"># module de Munin, utilisé pour le monitoring</span>
│   └── ...
├── pages/ <span class="c1"># module pour les autres pages, telles que la page d&#39;accueil, ...</span>
│   └── ...
├── search/ <span class="c1"># module de recherche</span>
│   └── ...
├── tutorial/ <span class="c1"># module des tutoriels</span>
│   └── ...
├── utils/ <span class="c1"># fonctions utiles à chaque module</span>
│   └── ...
├── middlewares/ <span class="c1"># codes provenant de sources externes</span>
│   └── ...
</pre></div>
</div>
<p>On retrouve également dans ce dossier les quelques fichiers suivants, nécessaires à la configuration et au fonctionnement de Django :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zds/
├── urls.py <span class="c1"># définition générale des URLs du site, inclus celle de chacun des modules</span>
├── settings.py <span class="c1"># paramètres du site</span>
├── settings_test.py <span class="c1"># paramètres spécifiques aux tests</span>
└── wsgi.py
</pre></div>
</div>
</div>
<div class="section" id="contenu-d-un-module">
<h2>Contenu d’un module<a class="headerlink" href="#contenu-d-un-module" title="Lien permanent vers ce titre">¶</a></h2>
<p>Chacun des modules possède dans son dossier une arborescence fort semblable, et dans laquelle il est possible de trouver:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module/
├── migrations/
│   └── ...
├── api/
│   └── ...
├── tests/
│   ├── tests.py
│   └── ...
├── admin.py
├── commons.py
├── factories.py
├── feeds.py
├── forms.py
├── managers.py
├── models.py
├── search_indexes.py
├── urls.py
└── views.py
</pre></div>
</div>
<div class="section" id="fichiers-principaux">
<h3>Fichiers principaux<a class="headerlink" href="#fichiers-principaux" title="Lien permanent vers ce titre">¶</a></h3>
<p>Django étant basé sur une architecture de type Modèle-Vue-Template, on retrouve les modèles dans le fichier <code class="docutils literal notranslate"><span class="pre">models.py</span></code> et les contrôles associés à celles-ci dans <code class="docutils literal notranslate"><span class="pre">views.py</span></code>. Ces dernières peuvent employer des classes formulaires qui sont définis dans <code class="docutils literal notranslate"><span class="pre">forms.py</span></code>. Les URLs associées au module et permetant d’accéder aux vues sont définies dans <code class="docutils literal notranslate"><span class="pre">urls.py</span></code>. On retrouve finalement des vues spécifiques associées aux fils RSS et Atom dans <code class="docutils literal notranslate"><span class="pre">feeds.py</span></code>.</p>
<p>On retrouve également des validateurs dans le fichier <code class="docutils literal notranslate"><span class="pre">commons.py</span></code> (voir à ce sujet <a class="reference external" href="https://docs.djangoproject.com/fr/1.8/ref/validators/">la documentation de Django</a>).</p>
</div>
<div class="section" id="tests-unitaires">
<h3>Tests unitaires<a class="headerlink" href="#tests-unitaires" title="Lien permanent vers ce titre">¶</a></h3>
<p>Une partie importante du développement est basée sur les tests unitaires : afin d’éviter qu’un développement futur ne brise une fonctionnalité, une série de test associé à chaque module est écrite dans des fichiers situés dans le dossier <code class="docutils literal notranslate"><span class="pre">tests/</span></code> de chaque module. Cette série de test peut être lancée en utilisant la commande suivante :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python manage.py <span class="nb">test</span> zds.module
</pre></div>
</div>
<p>où il est nécéssaire de remplacer <code class="docutils literal notranslate"><span class="pre">module</span></code> par le nom du module associé. Ces tests utilisent des données de tests générées par des <em>factories</em> (usines) qui sont définies dans <code class="docutils literal notranslate"><span class="pre">factories.py</span></code>.</p>
</div>
<div class="section" id="gestion-de-la-base-de-donnees">
<h3>Gestion de la base de données<a class="headerlink" href="#gestion-de-la-base-de-donnees" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le dossier <code class="docutils literal notranslate"><span class="pre">migrations/</span></code> permet à Django de consigner les changements effectués à des modèles qui modifient également la structure de la base de donnée. Son contenu ne devrait pas être modifié manuelement, il l’est cependant de manière automatique lorsque la commande suivante est utilisée :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python manage.py makemigrations
</pre></div>
</div>
<p>Celle-ci doit être utilisée lorsqu’une variable d’un modèle (dans <code class="docutils literal notranslate"><span class="pre">models.py</span></code>) est modifiée, ajoutée ou supprimée. Si tel est le cas, n’oubliez pas d’inclure le fichier résultant (de la forme <code class="docutils literal notranslate"><span class="pre">xxxx_auto_yyy.py</span></code>) dans votre prochain <em>commit</em> !</p>
<p>Cela permettra aux autres développeurs de répercuter les modifications en utilisant:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python manage.py migrate --fake-initial
</pre></div>
</div>
</div>
<div class="section" id="api">
<h3>API<a class="headerlink" href="#api" title="Lien permanent vers ce titre">¶</a></h3>
<p>Une description fonctionnelle de l’API est faite <a class="reference external" href="../api.html">sur la page correspondante</a>.</p>
<p>Les fichiers correspondants à une API du module (si elle existe) se situent dans le dossier <code class="docutils literal notranslate"><span class="pre">api/</span></code>. Dans celui-ci, se trouvent principalement de nouvelles vues (<code class="docutils literal notranslate"><span class="pre">api/views.py</span></code>), URLs (<code class="docutils literal notranslate"><span class="pre">api/urls.py</span></code>) et tests (<code class="docutils literal notranslate"><span class="pre">api/tests.py</span></code>). On retrouve également des <em>serializers</em> dans <code class="docutils literal notranslate"><span class="pre">api/serializers.py</span></code>, nécessaires à la création de l’API (voir à ce sujet <a class="reference external" href="http://www.django-rest-framework.org/api-guide/serializers/">la documentation du REST framework (en)</a>).</p>
</div>
<div class="section" id="autres">
<h3>Autres<a class="headerlink" href="#autres" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le fichier <code class="docutils literal notranslate"><span class="pre">search_index.py</span></code> est utilisé par Django pour générer les <em>index</em> de recherche pour <a class="reference external" href="../install/install-solr.html">Solr</a>.</p>
<p>Le fichier <code class="docutils literal notranslate"><span class="pre">admin.py</span></code> est quand à lui employé par Django pour la partie administration (accessible en local via <code class="docutils literal notranslate"><span class="pre">/admin/</span></code>).</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="featured.html" class="btn btn-neutral float-right" title="Les outils de mises en avant (featured/)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../back-end-code.html" class="btn btn-neutral float-left" title="Documentation technique du back-end" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2014-2021, Zeste de Savoir.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>