

<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Les galeries &mdash; Documentation Zeste de Savoir dev</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Les membres" href="member.html" />
    <link rel="prev" title="Les forums" href="forum.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Zeste de Savoir
          

          
          </a>

          
            
            
              <div class="version">
                dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../guides.html">Guides pas-à-pas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contribuer à Zeste de Savoir</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html"><em>Workflow</em> et détails pratiques</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../back-end.html">Le <em>back-end</em></a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="contents.html">Les tutoriels et articles</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents_manifest.html">Les fichiers de manifeste</a></li>
<li class="toctree-l2"><a class="reference internal" href="forum.html">Les forums</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Les galeries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generalites">Généralités</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creation-et-remplissage">Création et remplissage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#les-utilisateurs-et-leurs-droits">Les utilisateurs et leurs droits</a></li>
<li class="toctree-l4"><a class="reference internal" href="#la-suppression">La suppression</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lien-galerie-tutoriel">Lien galerie &lt;-&gt; Tutoriel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#aspects-techniques">Aspects techniques</a></li>
<li class="toctree-l3"><a class="reference internal" href="#outils-logiciels-utilises">Outils logiciels utilisés</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="member.html">Les membres</a></li>
<li class="toctree-l2"><a class="reference internal" href="private-message.html">Les messages privés</a></li>
<li class="toctree-l2"><a class="reference internal" href="searchv2.html">La recherche</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../back-end-code.html">Documentation technique du <em>back-end</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="../front-end.html">Le <em>front-end</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils.html">Makefile et autres outils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../delay-issue.html">Problème de lenteur lors du dev ?</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Zeste de Savoir</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../back-end.html">Le <em>back-end</em></a> &raquo;</li>
        
      <li>Les galeries</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/back-end/gallery.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="les-galeries">
<h1>Les galeries<a class="headerlink" href="#les-galeries" title="Lien permanent vers ce titre">¶</a></h1>
<p>La liste des galeries de l’utilisateur est accessible via l’url suivante : <code class="docutils literal notranslate"><span class="pre">/galerie/</span></code>.</p>
<div class="section" id="generalites">
<h2>Généralités<a class="headerlink" href="#generalites" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une galerie rassemble un certain nombre d’images. Elle doit prendre un titre et peut également posséder un sous-titre.</p>
<div class="section" id="creation-et-remplissage">
<h3>Création et remplissage<a class="headerlink" href="#creation-et-remplissage" title="Lien permanent vers ce titre">¶</a></h3>
<p>On peut créer une nouvelle galerie via l’url <code class="docutils literal notranslate"><span class="pre">/galerie/nouveau/</span></code>. Le titre de la galerie et un sous-titre facultatif sont demandés.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Une galerie est créée <strong>automatiquement</strong> lors de la création d’un nouveau <a class="reference external" href="contents.html">contenu</a> par un utilisateur. Elle possède alors le même nom que celui-ci.</p>
</div>
<p>Il est ensuite possible d’uploader des images via le menu de gauche :</p>
<blockquote>
<div><div class="figure align-center" id="id1">
<img alt="../_images/menu-gauche.png" src="../_images/menu-gauche.png" />
<p class="caption"><span class="caption-text">Liens permettant d’uploader des images</span><a class="headerlink" href="#id1" title="Lien permanent vers cette image">¶</a></p>
</div>
</div></blockquote>
<p>Via celui-ci, on peut importer des archives contenant des images (au format ZIP) ou des images seules. Dans ce dernier cas, le formulaire d”<em>upload</em> est le suivant :</p>
<blockquote>
<div><div class="figure align-center" id="id2">
<img alt="../_images/nouvelle-image.png" src="../_images/nouvelle-image.png" />
<p class="caption"><span class="caption-text">Formulaire d’upload de nouvelles images</span><a class="headerlink" href="#id2" title="Lien permanent vers cette image">¶</a></p>
</div>
</div></blockquote>
<p>Comme on peut le voir, chaque image doit posséder au minimum un titre et peut posséder une légende, qui sera employée par la suite. Il est donc conseillé de remplir également ce second champ, bien que ce ne soit pas obligatoire. Quant à l’image elle-même, sa taille ne peut pas excéder 1024 Kio.</p>
<p>Une fois l’image uploadée, il est possible d’y effectuer différentes actions sur la page qui lui est spécifique :</p>
<blockquote>
<div><div class="figure align-center" id="id3">
<img alt="../_images/gestion-image.png" src="../_images/gestion-image.png" />
<p class="caption"><span class="caption-text">Gestion d’une image</span><a class="headerlink" href="#id3" title="Lien permanent vers cette image">¶</a></p>
</div>
</div></blockquote>
<p>Autrement dit,</p>
<ul class="simple">
<li><p>En modifier le titre, la légende ou encore l’image en elle-même. À noter que le titre et la légende peuvent être modifiés <strong>sans qu’il ne soit nécessaire</strong> d’uploader une nouvelle image.</p></li>
<li><p>Obtenir le code à insérer dans un champ de texte acceptant le Markdown pour l’image en elle-même, sa miniature ou encore la miniature accompagnée du lien vers l’image en taille réelle.</p></li>
</ul>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Le titre de l’image n’entre pas en compte dans le nommage de l’image une fois cette dernière téléchargée. Afin de réduire le risque de rencontrer des conflits de noms de fichiers, ces derniers sont hashés.</p>
</div>
</div>
<div class="section" id="les-utilisateurs-et-leurs-droits">
<h3>Les utilisateurs et leurs droits<a class="headerlink" href="#les-utilisateurs-et-leurs-droits" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le créateur de la galerie possède un droit d’écriture, mais peut y ajouter à tout moment des utilisateurs :</p>
<blockquote>
<div><div class="figure align-center" id="id4">
<img alt="../_images/gestion-auteurs.png" src="../_images/gestion-auteurs.png" />
<p class="caption"><span class="caption-text">Ajout d’un nouvel utilisateur</span><a class="headerlink" href="#id4" title="Lien permanent vers cette image">¶</a></p>
</div>
</div></blockquote>
<p>Lors d’un clic sur « Ajouter un utilisateur », une fenêtre modale s’ouvre :</p>
<blockquote>
<div><div class="figure align-center" id="id5">
<img alt="../_images/gestion-auteurs2.png" src="../_images/gestion-auteurs2.png" />
<p class="caption"><span class="caption-text">Choix de l’utilisateur et sélection de ses droits</span><a class="headerlink" href="#id5" title="Lien permanent vers cette image">¶</a></p>
</div>
</div></blockquote>
<p>Il est alors possible de rajouter un nouvel utilisateur dans la galerie. Les droits de celui-ci peuvent être les suivants :</p>
<ul class="simple">
<li><p><strong>Lecture</strong> : (<code class="docutils literal notranslate"><span class="pre">zds.gallery.models.GALLERY_READ</span></code>) l’utilisateur a seulement le droit de consulter les images existantes dans la galerie sans pouvoir apporter de modifications ;</p></li>
<li><p><strong>Écriture</strong> : (<code class="docutils literal notranslate"><span class="pre">zds.gallery.models.GALLERY_WRITE</span></code>), inclut <strong>Lecture</strong>, l’utilisateur peut modifier ou supprimer des images existantes, en rajouter des nouvelles et changer les attributs de la galerie (y compris y ajouter de nouveaux utilisateurs);</p></li>
</ul>
<p>Il n’est actuellement pas possible de modifier les droits d’un utilisateur après son ajout à la galerie.</p>
</div>
<div class="section" id="la-suppression">
<h3>La suppression<a class="headerlink" href="#la-suppression" title="Lien permanent vers ce titre">¶</a></h3>
<p>Une image peut être supprimée à tout moment en la sélectionnant sur la page de la galerie et en cliquant sur le bouton suivant :</p>
<blockquote>
<div><div class="figure align-center" id="id6">
<img alt="../_images/sup-image.png" src="../_images/sup-image.png" />
<p class="caption"><span class="caption-text">Suppression d’une ou plusieurs image(s)</span><a class="headerlink" href="#id6" title="Lien permanent vers cette image">¶</a></p>
</div>
</div></blockquote>
<p>Attention : aucune confirmation n’est demandée lors de la suppression d’une image.</p>
<p>Une galerie peut quant à elle être supprimée via la page de gestion des galeries (<code class="docutils literal notranslate"><span class="pre">/galerie/</span></code>) en cochant la case de celle-ci et en cliquant sur « Supprimer les galeries sélectionnées » dans le menu de gauche :</p>
<blockquote>
<div><div class="figure align-center" id="id7">
<img alt="../_images/sup-galerie.png" src="../_images/sup-galerie.png" />
<p class="caption"><span class="caption-text">Suppression d’une galerie</span><a class="headerlink" href="#id7" title="Lien permanent vers cette image">¶</a></p>
</div>
</div></blockquote>
<p>Une modale s’ouvre ensuite, demandant de confirmer le choix :</p>
<blockquote>
<div><div class="figure align-center" id="id8">
<img alt="../_images/sup-galerie2.png" src="../_images/sup-galerie2.png" />
<p class="caption"><span class="caption-text">Confirmation</span><a class="headerlink" href="#id8" title="Lien permanent vers cette image">¶</a></p>
</div>
</div></blockquote>
<p>Une fois cliqué sur « Confirmer », la galerie et les images qu’elle contient sont supprimées.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Si une galerie est liée à un tutoriel existant, elle ne peut pas être supprimée.</p>
</div>
</div>
</div>
<div class="section" id="lien-galerie-tutoriel">
<h2>Lien galerie &lt;-&gt; Tutoriel<a class="headerlink" href="#lien-galerie-tutoriel" title="Lien permanent vers ce titre">¶</a></h2>
<p>Chaque tutoriel possède une galerie en propre. Par défaut cette galerie possède le même nom qui a été donné au tutoriel lors de sa création.</p>
<p>Chaque auteur possède un droit d’accès en écriture (<code class="docutils literal notranslate"><span class="pre">GALLERY_WRITE</span></code>) sur la galerie liée au tutoriel.</p>
<p>Si un membre possède un droit de lecture seule (<code class="docutils literal notranslate"><span class="pre">GALLERY_READ</span></code>) sur la galerie d’un tutoriel, aucun droit n’est accordé à ce membre quant au tutoriel.</p>
</div>
<div class="section" id="aspects-techniques">
<h2>Aspects techniques<a class="headerlink" href="#aspects-techniques" title="Lien permanent vers ce titre">¶</a></h2>
<p>Chaque galerie (classe <code class="docutils literal notranslate"><span class="pre">Gallery</span></code>) est stockée en base de données avec son titre, son sous-titre et son <em>slug</em> (ainsi que la date de création et de dernière modification). Une galerie est associée à l’utilisateur via la classe <code class="docutils literal notranslate"><span class="pre">UserGallery</span></code>, qui reprend un lien vers l’utilisateur, la galerie, mais également les droits qu’il possède sur cette dernière, sous la forme d’une constante : <code class="docutils literal notranslate"><span class="pre">GALLERY_READ</span></code> pour le droit de lecture ou <code class="docutils literal notranslate"><span class="pre">GALLERY_WRITE</span></code> pour le droit d’écriture.</p>
<p>Une image (classe <code class="docutils literal notranslate"><span class="pre">Image</span></code>) est renseignée en base de données avec son titre, sa légende, un lien vers la galerie qui la contient, son <em>slug</em> et un lien <em>physique</em> vers le fichier image (ainsi que la date de création et de dernière modification).</p>
<p>Les images sont stockées dans le dossier renseigné par la variable <code class="docutils literal notranslate"><span class="pre">MEDIA_URL</span></code> (dans le fichier <code class="docutils literal notranslate"><span class="pre">settings.py</span></code>), dans un sous-dossier dont le nom correspond au <code class="docutils literal notranslate"><span class="pre">pk</span></code> de la galerie. C’est la librairie <a class="reference external" href="https://github.com/SmileyChris/easy-thumbnails">easy_thumbnails</a> qui gère la génération des miniatures correspondantes aux images uploadées, à la demande du <em>back</em>.</p>
</div>
<div class="section" id="outils-logiciels-utilises">
<h2>Outils logiciels utilisés<a class="headerlink" href="#outils-logiciels-utilises" title="Lien permanent vers ce titre">¶</a></h2>
<p>Afin d’assurer une compatibilité maximale de toutes les images des galeries et leur redimensionnement au besoin, le logiciel <code class="docutils literal notranslate"><span class="pre">Pillow</span></code> est utilisé.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="member.html" class="btn btn-neutral float-right" title="Les membres" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="forum.html" class="btn btn-neutral float-left" title="Les forums" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2014-2021, Zeste de Savoir

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>