from django.db import migrations, models
from django.conf import settings
from django.contrib.auth.models import User

from zds.member.models import BannedEmailProvider


def forwards_func(apps, schema_editor):
    # Import banned providers if there is a bot account
    providers = [
        "0-mail.com",
        "0815.ru",
        "0clickemail.com",
        "0wnd.net",
        "0wnd.org",
        "10mail.org",
        "10minutemail.",
        "123-m.com",
        "123.com",
        "126.com",
        "139.com",
        "163.com",
        "1pad.de",
        "20mail.",
        "20minutemail.com",
        "20mm.in",
        "21cn.com",
        "2prong.com",
        "33mail.com",
        "3d-painting.com",
        "4warding.",
        "60minutemail.com",
        "6paq.com",
        "75hosting.",
        "7days-printing.com",
        "7tags.com",
        "99experts.com",
        "9ox.net",
        "a-bc.net",
        "abc.bg",
        "abusemail.de",
        "abv.bg",
        "abyssmail.com",
        "ac20mail.in",
        "acentri.com",
        "adamsnet.info",
        "adm1.me",
        "advantimo.com",
        "advertfast.com",
        "agedmail.com",
        "agendosa.com",
        "aichyna.com",
        "ajaxapp.net",
        "ak.mintemail.com",
        "amilegit.com",
        "amiri.net",
        "amiriindustries.com",
        "anappfor.com",
        "anappthat.com",
        "ano-mail.net",
        "anonbox.net",
        "anonymbox.com",
        "antichef.",
        "antifork.org",
        "antispam.de",
        "appixie.com",
        "armyspy.com",
        "atvclub.msk.ru",
        "baxomale.ht.cx",
        "beefmilk.com",
        "berahe.info",
        "bi-dating.info",
        "bigmir.net",
        "bigstring.com",
        "binkmail.com",
        "bio-muesli.net",
        "bitmessage.ch",
        "bk.ru",
        "blackbox.trillianpro.com",
        "bladesmail.net",
        "bloatbox.com",
        "bob.ubx.se",
        "bobmail.info",
        "bodhi.lawlita.com",
        "bofthew.com",
        "bookee.com",
        "boxformail.in",
        "boximail.com",
        "boxtemp.com.br",
        "brefmail.com",
        "brennendesreich.de",
        "broadbandninja.com",
        "bsnow.net",
        "bspamfree.org",
        "buffemail.com",
        "bugmenot.com",
        "bumpymail.com",
        "bund.us",
        "burnthespam.info",
        "buyusedlibrarybooks.org",
        "byom.de",
        "c2.hu",
        "camcecil.com",
        "cash.com",
        "cashette.",
        "casualdx.com",
        "ccxt.info",
        "ce.mintemail.com",
        "cellurl.com",
        "centermail.",
        "chammy.info",
        "charklasers.com",
        "chcb.info",
        "cheatmail.de",
        "chogmail.com",
        "chong-mail.",
        "claeys.qc.to",
        "clixser.com",
        "clrmail.com",
        "cmail.",
        "cock.li",
        "coloccini.com.ar",
        "computerquip.com",
        "consumerriot.com",
        "cool.fr.nf",
        "correo.blogos.net",
        "corsa-tuning.",
        "cosmorph.com",
        "courriel.fr.nf",
        "courrieltemporaire.com",
        "crapmail.org",
        "crazespaces.pw",
        "curryworld.de",
        "cust.in",
        "cuvox.de",
        "cvs.in.th",
        "cx.de-a.org",
        "dacoolest.com",
        "dadasoft.com.mx",
        "daintly.com",
        "dandikmail.com",
        "dani.ml",
        "dataleak.info.tm",
        "dauer.info",
        "dayrep.com",
        "dbunker.com",
        "dcemail.com",
        "deadaddress.com",
        "deagot.com",
        "dealja.com",
        "deo-vindice",
        "despam.it",
        "devnullmail.com",
        "dfgh.net",
        "digit-labs.web.id",
        "digitalsanctuary.com",
        "dingbone.com",
        "dinkys.ws",
        "discardmail.",
        "discardmail.com",
        "disposableaddress.com",
        "disposableinbox.com",
        "dispose.it",
        "disposeamail.com",
        "disposemail.",
        "dispostable.com",
        "divermail.com",
        "dlemail.ru",
        "dm.w3internet.co.uk",
        "doc.biz.tm",
        "dodgeit.",
        "dodgeit.com",
        "dodgemail.de",
        "dodgit.",
        "domain141.com",
        "domforfb4.tk",
        "domozmail.com",
        "dontreg.com",
        "dontsendmespam.de",
        "dota.epicgamer.org",
        "dotmsg.com",
        "drdrb.",
        "droplar.com",
        "dropmail.me",
        "dudmail.com",
        "dump-email.info",
        "dumpyemail.com",
        "dunflimblag.mailexpire.com",
        "duskmail.com",
        "dw.now.im",
        "dx.ez.lv",
        "dx.sly.io",
        "e-mail.",
        "e-mail.com",
        "e4ward.com",
        "easy-trash-mail.com",
        "easytrashmail.com",
        "eco.wretch.twbbs.org",
        "eelmail.com",
        "einrot.com",
        "einrot.de",
        "email-jetable.",
        "email.cbes.net",
        "email.com",
        "email.net",
        "email60.com",
        "emailgo.de",
        "emailias.com",
        "emailinfive.com",
        "emailjetable.",
        "emaillime.com",
        "emailmiser.com",
        "emailsensei.com",
        "emailtemporar.",
        "emailtemporario.",
        "emailtemporario.com.br",
        "emailthe.net",
        "emailtmp.",
        "emailto.de",
        "emailwarden.com",
        "enraged-bl.tk",
        "envenve1e.com",
        "ephemail.",
        "epicgamer.org",
        "esa.thc.lv",
        "est.une.victime.ninja",
        "etranquil.",
        "europe.com",
        "evilninjapirates.com",
        "example.com",
        "explodemail.com",
        "eyepaste.com",
        "faic.tk",
        "fakeinbox.com",
        "fakeinformation.com",
        "fakemail.com",
        "fakemail.fr",
        "fanaticars.info",
        "fantasymail.de",
        "fastacura.com",
        "fatflap.com",
        "faza.ru ",
        "fdfdsfds.com",
        "fightallspam.com",
        "filzmail.com",
        "find-love.info",
        "fizmail.com",
        "fleckens.hu",
        "flemail.ru",
        "flurred.com",
        "flyspam.com",
        "for-fun.info",
        "foteret.info",
        "fr33mail.info",
        "fractum.hol.es",
        "frapmail.com",
        "freefreemail.info",
        "freenet.de",
        "freestuffo1.",
        "freestuffo2.",
        "freestuffo3.",
        "freestuffo4.",
        "friendlymail.",
        "fromru.com",
        "front14.org",
        "fuckingduh.com",
        "fudgerub.com",
        "gametheorylabs.com",
        "garliclife.com",
        "gawab.com",
        "geer4.mooo.com",
        "get1mail.com",
        "get2mail.fr",
        "getairmail.com",
        "getmails.eu",
        "getonemail.",
        "ghosttexter.de",
        "girlsundertheinfluence.com",
        "gishpuppy.com",
        "gnoia.org",
        "go.irc.so",
        "goemailgo.com",
        "gold2world.biz",
        "gotmail.",
        "gotti.otherinbox.com",
        "gowikibooks.com",
        "gowikicampus.com",
        "gowikicars.com",
        "gowikifilms.com",
        "gowikigames.com",
        "gowikimusic.com",
        "gowikinetwork.com",
        "gowikitravel.com",
        "gowikitv.com",
        "grandmamail.com",
        "grandmasmail.com",
        "great-host.in",
        "grifon.info",
        "grr.la",
        "gsrv.co.uk",
        "guerillamail.",
        "guerrillamail.",
        "guerrillamailblock.",
        "gustr.com",
        "h1ch3r.net",
        "hacccc.com",
        "hacker1.com.br",
        "haltospam.com",
        "haqed.com",
        "haqued.com",
        "harakirimail.com",
        "herp.in",
        "hidzz.com",
        "hintz.org",
        "hochsitze.com",
        "hotpop.com",
        "hulapla.de",
        "humn.ws.gy",
        "hushmail.com",
        "idan.be",
        "ieatspam.eu",
        "ieatspam.info",
        "iespana.es",
        "ignorelist.com",
        "ihateyoualot.info",
        "iiserk.net",
        "imails.info",
        "imgof.com",
        "inbox.ru",
        "inboxclean.",
        "incognitomail.",
        "instant-mail.de",
        "ipoo.org",
        "irish2me.com",
        "isaichkin.ru",
        "isuisse.com",
        "it.sackler.net",
        "iwi.net",
        "jetable.",
        "jnxjn.com",
        "jourrapide.com",
        "jsrsolutions.com",
        "junk.trillianpro.com",
        "junk1e.com",
        "kasmail.com",
        "kaspop.com",
        "kkll.cu.cc",
        "klassmaster.com",
        "kloap.com",
        "klzlk.com",
        "korsun.pp.ru",
        "kulturbetrieb.info",
        "kurzepost.de",
        "landmail.co",
        "lastmail.",
        "lavabit.com",
        "lekovic.ca",
        "letthemeatspam.com",
        "lhsdv.com",
        "lichtisten.com",
        "lifebyfood.com",
        "link2mail.",
        "link2mail.net",
        "linuxx.org",
        "linxlunx.info",
        "list.ru",
        "litedrop.com",
        "lookugly.com",
        "lopl.co.cc",
        "lovemeleaveme.com",
        "lr78.com",
        "lroid.com",
        "m4ilweb.info",
        "ma1l.bij.pl",
        "maboard.com",
        "mail-filter.com",
        "mail-gratuit.com",
        "mail-temporaire.",
        "mail.by",
        "mail.mezimages.net",
        "mail.ru",
        "mail114.net",
        "mail15.com",
        "mail15.fr",
        "mail333.com",
        "mail4trash.com",
        "mailbidon.com",
        "mailbucket.org",
        "mailcatch.com",
        "maildx.com",
        "maileater.com",
        "mailed.ro",
        "mailexpire.com",
        "mailfs.com",
        "mailguard.me",
        "mailhazard.com",
        "mailin8r.com",
        "mailinater.com",
        "mailinator.",
        "mailinator2.",
        "mailincubator.com",
        "mailismagic.com",
        "mailme.crabdance.com",
        "mailme.lv",
        "mailmetrash.com",
        "mailmoat.com",
        "mailnator.",
        "mailnesia.com",
        "mailnull.com",
        "mailquack.com",
        "mailscrap.com",
        "mailtemporaire.com",
        "mailtemporaire.fr",
        "mailtothis.com",
        "mailzi.ru",
        "mailzilla.",
        "makemetheking.com",
        "manybrain.com",
        "masterhost.ru",
        "mbx.cc",
        "mega.zik.dj",
        "meltmail.com",
        "messagebeamer.de",
        "mierdamail.com",
        "migmail.pl",
        "migumail.com",
        "mintemail.com",
        "misena.edu.co",
        "mobileninja.co.uk",
        "moburl.com",
        "mohmal.com",
        "moncourrier.fr.nf",
        "monemail.fr.nf",
        "monmail.fr.nf",
        "monumentmail.com",
        "mor19.uu.gl",
        "mouly.com.ar",
        "moyareklama.ru",
        "mrbox.root.sx",
        "msk.su",
        "mt2009.com",
        "mt2014.com",
        "muell.email",
        "muuh.info",
        "mx0.wwwnew.eu",
        "my.efxs.ca",
        "my10minutemail.com",
        "mybox.root.sx",
        "mycleaninbox.net",
        "myemailboxy.com",
        "mymail-in.net",
        "mypacks.net",
        "mypartyclip.de",
        "myspaceinc.",
        "myspacepimpedup.com",
        "mytemp.email",
        "mytempemail.com",
        "mytrashmail.com",
        "myxost.com",
        "national.shitposting.agency",
        "naver.com",
        "ne-quid-nimis.info",
        "nepwk.com",
        "nervmich.net",
        "nervtmich.net",
        "netmails.net",
        "netzidiot.de",
        "neverbox.com",
        "nice-4u.com",
        "nikvdp.com",
        "nil-admirari.info",
        "no-spam.",
        "no-spam.hu",
        "nobulk.com",
        "noclickemail.com",
        "nogmailspam.info",
        "nomail.xl.cx",
        "nomail2me.com",
        "nospam.",
        "nospam.ze.tc",
        "nospam4.",
        "nospamfor.",
        "nospamthanks.info",
        "notmailinator.com",
        "novoemail.homenet.org",
        "nowhere.org",
        "nowmymail.com",
        "nowonder.homenet.org",
        "nowwhat.linuxd.org",
        "nurfuerspam.de",
        "nwldx.com",
        "objectmail.com",
        "obobbo.com",
        "octivian.com",
        "one.it",
        "oneoffemail.com",
        "onetime.email",
        "onewaymail.com",
        "oopi.org",
        "oos.tw",
        "ordinaryamerican.net",
        "otherinbox.com",
        "ourklips.com",
        "ove.ali.com.pk",
        "owlpic.com",
        "p0ns.org",
        "paplease.com",
        "paschke.org",
        "paukner.org",
        "pcusers.otherinbox.com",
        "pecdo.com",
        "pedco.com",
        "pepbot.com",
        "perlpowered.com",
        "pimpedupmyspace.com",
        "pisem.net",
        "plsmail.us.to",
        "po.bot.nu",
        "pochta.ru",
        "poczta.onet.pl",
        "politikerclub.de",
        "pookmail.com",
        "porn.com",
        "pornoroxx.net",
        "portsaid.cc",
        "prescrip.pl",
        "privacy.net",
        "privy-mail.com",
        "protocultura.net",
        "proxymail.eu",
        "prtnx.com",
        "puk.us.to",
        "punkass.com",
        "putthisinyourspamdatabase.com",
        "pwn.linuxx.org",
        "pwrby.com",
        "qarea.com",
        "qasti.com",
        "qia.bep.co.id",
        "qisdo.com",
        "qisoa.com",
        "qlfg.com",
        "qq.com",
        "quasti.com",
        "quickinbox.com",
        "radiku.ye.vc",
        "rambler.ru",
        "ranftl.org",
        "rcpt.at",
        "reallymymail.com",
        "recode.me",
        "recursor.net",
        "reddementes.net",
        "redthumb.info.tm",
        "regbypass.",
        "rev.vci.si",
        "rhyta.com",
        "rklips.com",
        "rmqkr.net",
        "roshankarki.com.np",
        "royal.net",
        "rppkn.com",
        "rr.ccs.pl",
        "rtrtr.com",
        "s0ny.net",
        "safe-mail.net",
        "safetymail.info",
        "safetypost.de",
        "sales.trillianpro.com",
        "samo.ohi.tw",
        "sandelf.de",
        "saynotospams.com",
        "schafmail.de",
        "seco.sne.jp",
        "secret.shop.tm",
        "selfdestructingmail.com",
        "sempaktools.us.to",
        "sendspamhere.com",
        "sharklasers.com",
        "shiftmail.com",
        "shit.trillianpro.com",
        "shitmail.",
        "shitware.",
        "shokri.net",
        "shop.tm",
        "shop.tn",
        "shortmail.net",
        "shotmail.ru",
        "sibmail.com",
        "sify.com",
        "sija.pl",
        "sinnlos-mail.de",
        "siteposter.net",
        "sixohquad.com",
        "skeefmail.com",
        "skim.com",
        "slopsbox.com",
        "smeh.info",
        "smellfear.com",
        "snakemail.com",
        "sneakemail.com",
        "snkmail.com",
        "sofasurfer.ch",
        "sofort-mail.de",
        "sogetthis.com",
        "somany.ignorelist.com",
        "soodonims.com",
        "space-elephant.com",
        "spam.",
        "spam.la",
        "spam4.",
        "spam4.me",
        "spamarrest.",
        "spamavert.",
        "spambob.",
        "spambooger.com",
        "spambox.",
        "spambox.us",
        "spamcannon.",
        "spamcero.com",
        "spamcorptastic.com",
        "spamday.com",
        "spameater.org",
        "spamex.com",
        "spamfree.",
        "spamfree24.",
        "spamfree24.com",
        "spamfree24.net",
        "spamfree24.org",
        "spamgoes.in",
        "spamgourmet.",
        "spamgourmet.com",
        "spamh0le.com",
        "spamherelots.com",
        "spamhereplease.com",
        "spamhole.com",
        "spamify.com",
        "spaminator.de",
        "spamkill.",
        "spaml.",
        "spammotel.com",
        "spamobox.com",
        "spamsalad.in",
        "spamspot.com",
        "spamthis.co.uk",
        "spamthisplease.com",
        "spamtrail.com",
        "spamtroll.net",
        "speed.1s.fr",
        "spikio.com",
        "spoofmail.de",
        "squizzy.de",
        "sr.ro.lt",
        "startkeys.com",
        "stinkefinger.net",
        "streetwisemail.com",
        "stuffmail.de",
        "supergreatmail.com",
        "superrito.com",
        "superstachel.de",
        "suremail.info",
        "sysnet.org.pk",
        "tafmail.com",
        "tagyourself.com",
        "talkinator.com",
        "tapchicuoihoi.com",
        "techie.com",
        "teewars.org",
        "tele-vision.info",
        "teleworm.com",
        "teleworm.us",
        "temp-mail.org",
        "temp.emeraldwebmail.com",
        "tempalias.com",
        "tempe-mail.com",
        "tempemail.",
        "tempemail.net",
        "tempinbox.co.uk",
        "tempinbox.com",
        "tempmail.it",
        "tempmaildemo.com",
        "tempmailer.com",
        "tempomail.",
        "temporarily.de",
        "temporaryemail.",
        "temporaryinbox.",
        "temporaryinbox.com",
        "tempthe.net",
        "test5566.strangled.net",
        "thailaaa.org.ua",
        "thanksnospam.info",
        "thankyou2010.com",
        "thecannabishunter.com",
        "thedens.org",
        "theins4ne.net",
        "thisisnotmyrealemail.com",
        "thrma.com",
        "throam.com",
        "throwawayemailaddress.com",
        "throwawaymail.com",
        "tilien.com",
        "tittbit.in",
        "tmail.com",
        "tmailinator.com",
        "tokenmail.de",
        "tormail.org",
        "torry.multiservice.ru",
        "tradedoubling.co.uk",
        "tradermail.info",
        "trash-amil.",
        "trash-mail.",
        "trash-mail.com",
        "trash-mail.de",
        "trash2009.",
        "trash2010.",
        "trash2011.",
        "trashdevil.com",
        "trashdevil.de",
        "trashmail.",
        "trashmailer.",
        "trashymail.",
        "travelwith.spacetechnology.net",
        "trbvm.com",
        "trickmail.net",
        "trickmail.net6",
        "trillianpro.com",
        "trollope.za.net",
        "turual.com",
        "tut.by",
        "twilightparadox.com",
        "tyldd.com",
        "ubismail.net",
        "uggsrock.com",
        "ukr.net",
        "umail.net",
        "upal.se",
        "upliftnow.com",
        "uplipht.com",
        "uroid.com",
        "usa.com",
        "users.1go.dk",
        "valemail.net",
        "veryrealemail.com",
        "vidchart.com",
        "viditag.com",
        "viewcastmedia.com",
        "viewcastmedia.net",
        "viewcastmedia.org",
        "viona.ml",
        "vkcode.ru",
        "vomoto.com",
        "vp.ycare.de",
        "vubby.com",
        "vxaz.com",
        "walala.org",
        "walkmail.ru",
        "want.javafaq.nu",
        "webemail.me",
        "webm4il.info",
        "weg-werf-email.de",
        "wegwerf-email-addressen.de",
        "wegwerf-emails.de",
        "wegwerfadresse.de",
        "wegwerfemail.de",
        "wegwerfmail.",
        "weibo.10086.cn",
        "welcome.twilightparadox.com",
        "wetrainbayarea.com",
        "wetrainbayarea.org",
        "wezel.ch",
        "wezel.info",
        "wh4f.com",
        "wh4f.org",
        "whatiaas.com",
        "whyspam.me",
        "wickmail.net",
        "willhackforfood.biz",
        "willselfdestruct.com",
        "winemaven.info",
        "winter.org",
        "wollan.info",
        "wollmann.org",
        "wovz.cu.cc",
        "wronghead.com",
        "wuzup.net",
        "wuzupmail.net",
        "x.trillianpro.com",
        "xagloo.com",
        "xardas.eu",
        "xing886.uu.gl",
        "xmail.com",
        "xoxy.net",
        "xww.ro",
        "xyzfree.net",
        "yahoo.com.ph",
        "yahoo.com.vn",
        "yandex.ru",
        "yeah.net",
        "yert.ye.vc",
        "yet.eva.hk",
        "yeuthuong.org",
        "yhg.biz",
        "yis.vr.lt",
        "yogamaven.com",
        "yomail.info",
        "yopmail.",
        "yopmail.netmailnesia.com",
        "you.loc.im",
        "ypmail.",
        "yufz.com",
        "yuurok.com",
        "za.com",
        "ze.gally.jp",
        "zetmail.com",
        "zippymail.info",
        "zoemail.net",
        "zomg.info",
    ]

    try:
        bot = User.objects.get(username=settings.ZDS_APP["member"]["bot_account"])
        bans = [BannedEmailProvider(provider=p, moderator=bot) for p in providers]
        BannedEmailProvider.objects.bulk_create(bans)
    except User.DoesNotExist:
        pass


class Migration(migrations.Migration):

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ("member", "0010_profile_show_markdown_help"),
    ]

    operations = [
        migrations.CreateModel(
            name="BannedEmailProvider",
            fields=[
                ("id", models.AutoField(verbose_name="ID", serialize=False, auto_created=True, primary_key=True)),
                ("provider", models.CharField(unique=True, max_length=253, verbose_name="Fournisseur", db_index=True)),
                (
                    "date",
                    models.DateTimeField(
                        db_column="ban_date", auto_now_add=True, verbose_name="Date du bannissement", db_index=True
                    ),
                ),
                (
                    "moderator",
                    models.ForeignKey(
                        related_name="banned_providers",
                        verbose_name="Mod\xe9rateur",
                        to=settings.AUTH_USER_MODEL,
                        on_delete=models.CASCADE,
                    ),
                ),
            ],
            options={
                "verbose_name": "Fournisseur banni",
                "verbose_name_plural": "Fournisseurs bannis",
            },
        ),
        migrations.CreateModel(
            name="NewEmailProvider",
            fields=[
                ("id", models.AutoField(verbose_name="ID", serialize=False, auto_created=True, primary_key=True)),
                ("provider", models.CharField(unique=True, max_length=253, verbose_name="Fournisseur", db_index=True)),
                (
                    "use",
                    models.CharField(
                        max_length=11,
                        verbose_name="Utilisation",
                        choices=[("NEW_ACCOUNT", "Nouveau compte"), ("EMAIL_EDIT", "\xc9dition de l'adresse e-mail")],
                    ),
                ),
                (
                    "date",
                    models.DateTimeField(
                        db_column="alert_date", auto_now_add=True, verbose_name="Date de l'alerte", db_index=True
                    ),
                ),
                (
                    "user",
                    models.ForeignKey(
                        related_name="new_providers",
                        verbose_name="Utilisateur concern\xe9",
                        to=settings.AUTH_USER_MODEL,
                        on_delete=models.CASCADE,
                    ),
                ),
            ],
            options={
                "verbose_name": "Nouveau fournisseur",
                "verbose_name_plural": "Nouveaux fournisseurs",
            },
        ),
        migrations.RunPython(forwards_func),
        migrations.AlterField(
            model_name="profile",
            name="show_markdown_help",
            field=models.BooleanField(default=True, verbose_name="Afficher l'aide Markdown dans l'\xe9diteur"),
        ),
    ]
